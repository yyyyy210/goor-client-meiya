webpackJsonp([8],{652:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return{loading:e.loading.models.DispatchPose,DispatchPose:e.DispatchPose,BricsDispatch:e.BricsDispatch}}Object.defineProperty(t,"__esModule",{value:!0});var n=(a(57),a(56)),o=i(n),l=(a(33),a(31)),d=i(l),c=(a(67),a(66)),r=i(c),p=a(28),u=i(p),f=a(27),h=i(f),m=a(3),y=i(m),g=a(7),D=i(g),v=a(6),b=i(v),E=a(5),S=i(E),k=(a(21),a(20)),P=i(k),M=(a(52),a(47)),C=i(M),O=a(1),T=i(O),x=a(23),_=a(53),B=a(270),L=i(B),N=a(271),F=i(N);a(783);var I=C.default.Option,V=[],J=P.default.confirm,K=function(e){function t(e){(0,y.default)(this,t);var a=(0,b.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e));a.props.location;return a.state={stateDefaultID:null,stateOK:[]},a.addMission=a.addMission.bind(a),a.sceneFiter=a.sceneFiter.bind(a),a}return(0,S.default)(t,e),(0,D.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.BricsDispatch.sceneList;this.sceneFiter(t)}},{key:"sceneFiter",value:function(e){if(e.length>0&&(V=[],e.map(function(e){1!==e.state&&3!==e.state||V.push({id:e.id.toString(),name:e.name,sceneName:e.mapSceneName})}),V.length>0&&null===this.state.stateDefaultID)){this.setState({stateOK:V});var t=_.loginState.getUser("scene");t&&JSON.parse(t).id?this.onChangeScene(JSON.parse(t).id):this.onChangeScene(V[0].id)}}},{key:"onChangeScene",value:function(e){for(var t=this.props.dispatch,a={},i=0;i<V.length;i++)if(e==V[i].id){a=V[i];break}_.loginState.setUser("scene",(0,u.default)(a)),this.setState({stateDefaultID:e.toString()}),t({type:"BricsDispatch/changeScenc",payload:{id:e}}),t({type:"DispatchPose/query",payload:{}})}},{key:"addMission",value:function(){var e=this.props.dispatch;e({type:"DispatchPose/missionList",payload:{missionListType:"patrol"}}),e({type:"BricsDispatch/VisibleEdit",payload:{Visible:"edit",item:{}}})}},{key:"render",value:function(){var e=this.props,t=e.DispatchPose,a=e.dispatch,i=e.loading,s=e.BricsDispatch,n=t.data,l=t.missionList,c=s.Visible,p={data:n,loading:i,overDispatch:function(e){J({iconType:"",title:"确认终止"+e.name+"任务?",onOk:function(){a({type:"DispatchPose/overDispatch",payload:{missionTaskId:e.id}})}})}},u={item:{},robots:s.defaultScene,missionList:l,setMissionType:function(e){a({type:"DispatchPose/missionList",payload:{missionListType:e}})},onOk:function(e){a({type:"DispatchPose/post",payload:e})},onCancel:function(){a({type:"BricsDispatch/VisibleEdit",payload:{Visible:"list"}})}};return T.default.createElement("div",{className:"modelMain"},T.default.createElement("div",{style:{background:"#fff"}},T.default.createElement(o.default,{className:"tabs"},T.default.createElement(r.default,{span:"8"},T.default.createElement("h2",null,"调度任务")),T.default.createElement(r.default,{span:"8",style:{textAlign:"center"}},T.default.createElement("span",null,"切换场景："),T.default.createElement(C.default,{value:this.state.stateDefaultID,style:{width:150},onChange:this.onChangeScene.bind(this),notFoundContent:"无可用场景"},this.state.stateOK.map(function(e,t){return T.default.createElement(I,{key:t,value:e.id},e.name)}))),T.default.createElement(r.default,{span:"8",style:{textAlign:"right"}},T.default.createElement(d.default,{onClick:this.addMission,className:"addMission"},"添加调度"))),T.default.createElement("div",{style:{padding:20}},T.default.createElement(F.default,p),"edit"===c&&T.default.createElement(L.default,u))))}}]),t}(T.default.Component);K.propTypes={dispatch:O.PropTypes.func,loading:O.PropTypes.bool,robots:O.PropTypes.array},t.default=(0,x.connect)(s)(K),e.exports=t.default},735:function(e,t,a){t=e.exports=a(59)(),t.push([e.id,".addMission,.addMission:focus,.addMission:hover{background:#23da74;color:#fff;border:none;font-size:16px;height:36px;line-height:36px}",""])},783:function(e,t,a){var i=a(735);"string"==typeof i&&(i=[[e.id,i,""]]);a(63)(i,{});i.locals&&(e.exports=i.locals)}});