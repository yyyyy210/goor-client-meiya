webpackJsonp([12],{571:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=(a(21),a(20)),i=l(n),u=(a(57),a(56)),r=l(u),d=(a(67),a(66)),o=l(d),s=(a(35),a(46)),c=l(s),f=a(2),p=l(f),m=a(27),E=l(m),y=a(3),b=l(y),g=a(7),T=l(g),v=a(6),h=l(v),L=a(5),P=l(L),C=(a(164),a(111)),_=l(C),k=(a(52),a(47)),V=l(k),A=(a(45),a(44)),U=l(A),I=a(1),w=l(I),q=a(53),D=U.default.Item,O=V.default.Option,N={labelCol:{span:6},wrapperCol:{span:16}},S=(_.default.Group,q.loginState.getUser("userInfo")),j=function(e){function t(e){(0,b.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,E.default)(t)).call(this,e)),l=a.props.item,n=!1;return l.roleId&&3==l.roleId&&(n=!0),a.state={roleShow:n},a}return(0,P.default)(t,e),(0,T.default)(t,[{key:"render",value:function(){function e(){y(function(e){if(!e){var t=b();if(t.id=n.id||"",t.stationList){var a=[];t.stationList.map(function(e,t){a.push({id:e})}),t.stationList=a}else t.stationList=[];s((0,p.default)({},t))}})}function t(e){}var a=this,l=this.props,n=l.item,u=l.roleCreateLimit,d=l.stationList,s=l.onOk,f=l.onCancel,m=l.form,E=m.getFieldDecorator,y=m.validateFields,b=m.getFieldsValue,g=(m.setFieldsValue,{title:""+(n.id?"修改用户":"添加用户"),visible:!0,onOk:e,onCancel:f,width:700,wrapClassName:"vertical-center-modal"}),T=[];n.id&&n.stationList&&n.stationList.map(function(e,t){T.push(e.id)});var v=function(e){a.setState({roleShow:3==e})};return w.default.createElement(i.default,g,w.default.createElement(U.default,{layout:"horizontal",onSubmit:e},n.id?w.default.createElement("div",null,w.default.createElement(D,(0,p.default)({label:"用户名称"},N),w.default.createElement("span",null,n.userName)),w.default.createElement(D,(0,p.default)({label:"密码"},N),E("password")(w.default.createElement(c.default,null))),w.default.createElement(D,(0,p.default)({label:"快捷登陆口令"},N),E("directLoginKey",{initialValue:n.directLoginKey,rules:[{pattern:/^\d{4}$/,message:"请输入4位数字密码"}]})(w.default.createElement(c.default,{placeholder:"4位数字密码"})))):w.default.createElement("div",null,w.default.createElement(D,(0,p.default)({label:"用户名称"},N),E("userName",{rules:[{required:!0,message:"用户名称未填写"}]})(w.default.createElement(c.default,null))),w.default.createElement(D,(0,p.default)({label:"密码"},N),E("password",{rules:[{required:!0,message:"密码未填写"}]})(w.default.createElement(c.default,null))),w.default.createElement(D,(0,p.default)({label:"快捷登陆口令"},N),E("directLoginKey",{initialValue:n.directLoginKey,rules:[{required:!0,pattern:/^\d{4}$/,message:"请输入4位数字密码"}]})(w.default.createElement(c.default,{placeholder:"4位数字密码"})))),w.default.createElement(D,(0,p.default)({label:"用户角色"},N),E("roleId",{initialValue:n.roleId?n.roleId.toString():u[0].id.toString(),rules:[{required:!0,message:"用户角色未选择"}]})(w.default.createElement(V.default,{onChange:v},u.map(function(e,t){return w.default.createElement(O,{value:""+e.id,key:e.id,disabled:S.roleId==e.id},e.name)})))),this.state.roleShow&&w.default.createElement(D,(0,p.default)({label:"绑定站"},N),E("stationList",{initialValue:T,rules:[{required:!0,message:"绑定站未选择"}]})(w.default.createElement(_.default.Group,{onChange:t},w.default.createElement(r.default,null,d.map(function(e,t){return w.default.createElement(o.default,{span:8,key:e.id},w.default.createElement(_.default,{value:e.id},e.name))})))))))}}]),t}(w.default.Component);j.propTypes={form:I.PropTypes.object.isRequired,item:I.PropTypes.object,roleCreateLimit:I.PropTypes.array,stationList:I.PropTypes.array,onOk:I.PropTypes.func,onCancel:I.PropTypes.func},t.default=U.default.create()(j),e.exports=t.default},572:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.data,a=e.loading,l=(e.stationType,e.onEdit),n=e.onDelete,i=function(e,t){var a;return(a={},(0,s.default)(a,m.UPDATE,l),(0,s.default)(a,m.DELETE,n),a)[e](t)},r=[{title:"用户名",dataIndex:"userName"},{title:"角色名称",dataIndex:"roleName"},{title:"站点列表",dataIndex:"stationList",render:function(e,t){return f.default.createElement("div",null,e&&e.map(function(t,a){return f.default.createElement("span",{key:a},t.name,e.length-1>a&&",")}))}},{title:"操作",key:"operation",width:100,className:"textAlign",render:function(e,t){return f.default.createElement("ul",null,f.default.createElement("li",null,f.default.createElement(u.default,{placement:"top",title:"编辑",onClick:function(){return i(m.UPDATE,t)}},f.default.createElement(d.default,{type:"edit"}))),f.default.createElement("li",null,f.default.createElement(u.default,{placement:"top",title:"删除",onClick:function(){return i(m.DELETE,t)}},f.default.createElement(d.default,{type:"delete"}))))}}];return f.default.createElement(p.DataTable,{columns:r,data:t,loading:a})}Object.defineProperty(t,"__esModule",{value:!0});var i=(a(39),a(38)),u=l(i),r=(a(24),a(13)),d=l(r),o=a(9),s=l(o),c=a(1),f=l(c),p=a(18),m=a(48);n.propTypes={data:c.PropTypes.object.isRequired,stationType:c.PropTypes.array,onEdit:c.PropTypes.func.isRequired,onDelete:c.PropTypes.func.isRequired},t.default=n,e.exports=t.default},573:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.datas,a=e.loading,l=e.dispatch,n=t.data,i=t.item,u=t.Visible,r=t.stationType,d=t.roleCreateLimit,s=t.stationList,f={add:{title:"添加用户",icon:"plus",type:"aGreen",onEditor:function(){0===s.length&&l({type:"AccountUser/station"}),l({type:"AccountUser/VisibleEdit",payload:{Visible:"edit",item:{}}})}}},m={data:n,loading:a,stationType:r,onEdit:function(e){0===s.length&&l({type:"AccountUser/station"}),l({type:"AccountUser/VisibleEdit",payload:{Visible:"edit",item:e}})},onDelete:function(e){y({iconType:"",title:"确认删除此条信息？",onOk:function(){l({type:"AccountUser/delete",payload:e})}})}},b={item:i,roleCreateLimit:d,stationList:s,onOk:function(e){l({type:"AccountUser/post",payload:e})},onCancel:function(){l({type:"AccountUser/VisibleEdit",payload:{Visible:"list"}})}};return o.default.createElement("div",{className:"modelMain"},o.default.createElement(c.Filter,f),o.default.createElement("div",{className:"connect"},o.default.createElement(p.default,m),"edit"===u&&o.default.createElement(E.default,b)))}function i(e,t){return{loading:e.loading.models.AccountUser,datas:e.AccountUser}}Object.defineProperty(t,"__esModule",{value:!0});var u=(a(21),a(20)),r=l(u),d=a(1),o=l(d),s=a(23),c=a(18),f=a(572),p=l(f),m=a(571),E=l(m),y=r.default.confirm;n.propTypes={dispatch:d.PropTypes.func,loading:d.PropTypes.bool,datas:d.PropTypes.object},t.default=(0,s.connect)(i)(n),e.exports=t.default}});