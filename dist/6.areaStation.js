webpackJsonp([6],{587:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=(a(21),a(20)),i=n(l),o=(a(57),a(56)),d=n(o),u=(a(67),a(66)),r=n(u),s=(a(52),a(47)),p=n(s),c=(a(35),a(46)),f=n(c),m=a(2),E=n(m),y=a(27),P=n(y),v=a(3),b=n(v),x=a(7),T=n(x),h=a(6),g=n(h),k=a(5),_=n(k),I=(a(45),a(44)),C=n(I),S=a(1),N=n(S);a(777);var L=C.default.Item,O={labelCol:{span:5},wrapperCol:{span:18}},D=function(e){function t(e){(0,b.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,P.default)(t)).call(this,e)),n=a.props.item;return a.state={mapIndex:"",pointOK:[],pointList:[],stationList:[],stationIndex:"",mapPoints:n.mapPoints&&n.mapPoints.length>0?n.mapPoints:[],mapPointsShow:!!(n.mapPoints&&n.mapPoints.length>0)},a}return(0,_.default)(t,e),(0,T.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.onOk,l=t.onCancel,o=t.pointCascade,u=t.stationTypeId,s=t.form,c=s.getFieldDecorator,m=s.validateFields,y=s.getFieldsValue,P=function(){m(function(t){t||n((0,E.default)({},y(),{mapPoints:e.state.mapPoints,id:a.id||""}))})},v=function(t){e.setState({mapIndex:t,pointOK:[],stationList:o[t].children,pointList:[],stationIndex:"",mapPoints:[]})},b=function(t){e.setState({stationIndex:t,pointList:e.state.stationList[t].children})},x=function(t,a){var n=e.state.pointList;n[a].active=!n[a].active;var l=e.state.mapPoints;if(n[a].active)l.push({id:t.id,point_name:t.point_name});else for(var i=0;i<l.length;i++)l[i].id===t.id&&l.splice(i,1);e.setState({pointOK:l,pointList:n})},T={title:""+(a.id?"修改站":"添加站"),visible:!0,onOk:P,onCancel:l,wrapClassName:"vertical-center-modal",width:800};return N.default.createElement(i.default,T,N.default.createElement(C.default,{className:"station",layout:"horizontal",onSubmit:P},N.default.createElement(L,(0,E.default)({label:"站名称"},O),c("name",{initialValue:a.name,rules:[{required:!0,message:"站名称未填写"}]})(N.default.createElement(f.default,null))),N.default.createElement(L,(0,E.default)({label:"站类型"},O),c("stationTypeId",{initialValue:a.stationTypeId?a.stationTypeId.toString():"1"})(N.default.createElement(p.default,null,u.map(function(e,t){return N.default.createElement(Option,{value:""+e.caption,key:e.caption},e.value)})))),N.default.createElement(L,(0,E.default)({label:"关联点"},O),this.state.mapPointsShow?N.default.createElement("ul",{className:"mapPoints"},N.default.createElement("li",null,N.default.createElement(d.default,null,N.default.createElement(r.default,{xs:4},N.default.createElement("span",null,"已选择点：")),N.default.createElement(r.default,{xs:20},N.default.createElement("div",{className:"setmap"},a.mapPoints.map(function(e,t){return N.default.createElement("span",{key:t},e.point_name)}),N.default.createElement("span",{className:"setmapDel",onClick:function(){e.setState({mapPointsShow:!1,mapPoints:[]})}},"重置")))))):N.default.createElement("ul",{className:"mapPoints"},N.default.createElement("li",null,N.default.createElement(d.default,null,N.default.createElement(r.default,{xs:4},N.default.createElement("span",null,"已选择点：")),N.default.createElement(r.default,{xs:20},N.default.createElement("div",{className:"setmap"},this.state.mapPoints.map(function(e,t){return N.default.createElement("span",{key:t},e.point_name)}))))),N.default.createElement("li",null,N.default.createElement(d.default,null,N.default.createElement(r.default,{xs:4},N.default.createElement("span",null,"地图列表：")),N.default.createElement(r.default,{xs:20},N.default.createElement("div",{className:"setmap"},o.map(function(t,a){return N.default.createElement("span",{className:e.state.mapIndex===a?"MapActive":"",onClick:function(){return v(a)},key:a},t.mapName)}))))),N.default.createElement("li",null,N.default.createElement(d.default,null,N.default.createElement(r.default,{xs:4},N.default.createElement("span",null,"点类型：")),N.default.createElement(r.default,{xs:20},N.default.createElement("div",{className:"setmap"},this.state.stationList.map(function(t,a){return N.default.createElement("span",{className:e.state.stationIndex===a?"MapActive":"",onClick:function(){return b(a)},key:a},t.name)}))))),N.default.createElement("li",null,N.default.createElement(d.default,null,N.default.createElement(r.default,{xs:4},N.default.createElement("span",null,"点列表：")),N.default.createElement(r.default,{xs:20},N.default.createElement("div",{className:"setmap"},this.state.pointList.map(function(e,t){return N.default.createElement("span",{className:e.active?"MapActive":"",onClick:function(){return x(e,t)},key:t},e.point_name)}))))))),N.default.createElement(L,(0,E.default)({label:"备注"},O),c("description",{initialValue:a.description||""})(N.default.createElement(f.default,{type:"textarea",rows:6})))))}}]),t}(N.default.Component);D.propTypes={form:S.PropTypes.object.isRequired,item:S.PropTypes.object,onOk:S.PropTypes.func,onCancel:S.PropTypes.func,pointCascade:S.PropTypes.array},t.default=C.default.create()(D),e.exports=t.default},588:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.data,a=e.loading,n=e.onEdit,l=e.onDelete,i=e.pointType,d=e.stationTypeId,r=function(e,t){var a;return(a={},(0,s.default)(a,m.UPDATE,n),(0,s.default)(a,m.DELETE,l),a)[e](t)},p=[{title:"站名称",dataIndex:"name"},{title:"站类型",dataIndex:"stationTypeId",render:function(e,t){return c.default.createElement("span",null,d[e-1].value)}},{title:"站关联点",dataIndex:"mapPoints",render:function(e,t){return e?c.default.createElement("div",null,e.map(function(e,t){return c.default.createElement("span",{key:t,style:{display:"block"}},i[e.point_type-1].value,":",e.point_name)})):c.default.createElement("span",null,"暂无关联")}},{title:"操作",key:"operation",width:100,className:"textAlign",render:function(e,t){return c.default.createElement("ul",null,c.default.createElement("li",null,c.default.createElement(o.default,{placement:"top",title:"编辑",onClick:function(){return r(m.UPDATE,t)}},c.default.createElement(u.default,{type:"edit"}))),c.default.createElement("li",null,c.default.createElement(o.default,{placement:"top",title:"删除",onClick:function(){return r(m.DELETE,t)}},c.default.createElement(u.default,{type:"delete"}))))}}];return c.default.createElement(f.DataTable,{columns:p,data:t,loading:a})}Object.defineProperty(t,"__esModule",{value:!0});var i=(a(39),a(38)),o=n(i),d=(a(24),a(13)),u=n(d),r=a(9),s=n(r),p=a(1),c=n(p),f=a(18),m=a(48);l.propTypes={data:p.PropTypes.object.isRequired,onEdit:p.PropTypes.func.isRequired,onDelete:p.PropTypes.func.isRequired,robotType:p.PropTypes.array,stationTypeId:p.PropTypes.array},t.default=l,e.exports=t.default},589:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.datas,a=e.loading,n=e.dispatch,l=t.data,i=t.item,o=t.Visible,d=t.pointType,u=t.stationTypeId,s=t.pointCascade,c={add:{title:"添加站",icon:"plus",type:"aGreen",onEditor:function(){0===s.length&&n({type:"areaStation/pointCascade"}),n({type:"areaStation/VisibleEdit",payload:{Visible:"edit",item:{}}})}},search:{}},m={data:l,loading:a,pointType:d,stationTypeId:u,onEdit:function(e){0===s.length&&n({type:"areaStation/pointCascade"}),n({type:"areaStation/VisibleEdit",payload:{Visible:"edit",item:e}})},onDelete:function(e){y({iconType:"",title:"确认删除此条信息？",onOk:function(){n({type:"areaStation/delete",payload:e})}})}},P={item:i,pointType:d,stationTypeId:u,pointCascade:s,onOk:function(e){n({type:"areaStation/post",payload:e})},onCancel:function(){n({type:"areaStation/VisibleEdit",payload:{Visible:"list"}})}};return r.default.createElement("div",{className:"modelMain"},r.default.createElement(p.Filter,c),r.default.createElement("div",{className:"connect"},r.default.createElement(f.default,m),"edit"===o&&r.default.createElement(E.default,P)))}function i(e,t){return{loading:e.loading.models.areaStation,datas:e.areaStation}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(21),a(20)),d=n(o),u=a(1),r=n(u),s=a(23),p=a(18),c=a(588),f=n(c),m=a(587),E=n(m),y=d.default.confirm;l.propTypes={dispatch:u.PropTypes.func,loading:u.PropTypes.bool,datas:u.PropTypes.object},t.default=(0,s.connect)(i)(l),e.exports=t.default},733:function(e,t,a){t=e.exports=a(59)(),t.push([e.id,".station .ant-select,.station input{max-width:300px}.mapPoints{border:1px solid #eee}.mapPoints li{border-bottom:1px solid #eee;padding:10px}.mapPoints li:first-child{background:#f7fcff}.mapPoints li:last-child{margin-bottom:0;border-bottom:none}.setmap{cursor:pointer}.setmap span{border:1px solid #eee;border-radius:3px;padding:0 10px;margin:0 10px 10px 0;background:#fff;display:inline-block}.setmap span.setmapDel{background:red;color:#fff}.setmap span:last-child{margin-right:0}.setmap span.MapActive{border:1px solid #108ee9;color:#108ee9}",""])},777:function(e,t,a){var n=a(733);"string"==typeof n&&(n=[[e.id,n,""]]);a(63)(n,{});n.locals&&(e.exports=n.locals)}});